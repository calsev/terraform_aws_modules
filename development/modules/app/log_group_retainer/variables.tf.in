variable "event_schedule_expression_default" {
  type        = string
  default     = "rate(1 hour)"
  description = "Either Cron expression or event pattern is required"
}

variable "function_timeout_seconds_default" {
  type        = number
  default     = 15
  description = "This can take time for many log groups"
}

variable "iam_data" {
  type = object({
    iam_policy_arn_batch_submit_job = string
    iam_policy_arn_ecs_start_task   = string
    iam_policy_arn_lambda_vpc       = string
  })
}

{{ log.var(retention=7) }}

variable "monitor_data" {
  type = object({
    alert = object({
      topic_map = map(object({
        topic_arn = string
      }))
    })
  })
}

{{ name.var() }}

variable "retention_list" {
  type = list(object({
    default_days      = number
    match_prefix_list = list(string)
    match_regex_list  = list(string)
    max_days          = number
    min_days          = number
  }))
  default = [
    {
      default_days      = 7
      match_prefix_list = ["/aws/"]
      match_regex_list  = ["event-trail"]
      max_days          = 30
      min_days          = 1
    },
    {
      default_days      = 365
      match_prefix_list = [""]
      match_regex_list  = []
      max_days          = 365
      min_days          = 7
    },
  ]
  description = "The first match in the list will be applied to each log group. A log group matches if either a prefix or regex matches."
}

{{ std.map() }}

{{ vpc.var(map_default="null", map_desc="Must be provided if any function is configured in a VPC") }}
